# Система инвентаря с перетаскиванием

## Описание сцены
На демонстрационной сцене расположен сундук с преднастроенным содержимым. Подойдите к нему и нажмите **E**, чтобы инициализировать взаимодействие и открыть окно инвентаря.

## Инвентарь и взаимодействия
Каждый слот инвентаря управляется компонентом [CellView](Assets/_Project/Scripts/Drag%20and%20drop/CellView.cs), который синхронизирует визуальное состояние с данными предмета: иконкой, типом, текущим и максимальным размером стека. Система поддерживает drag & drop, объединение стаков, автоподсказки и валидацию допустимых действий через [DragDropOrchestrator](Assets/_Project/Scripts/Drag%20and%20drop/_Drag%20Drop%20Orchestrator.cs).

## Контекстное меню
Правый клик по предмету при отсутствии перетаскиваемого стека открывает контекстное меню. Пункт **«Использовать»** доступен только для оружия и брони; для остальных типов активным остаётся только действие **«Удалить»**.

## Управление указателем
[CellView](Assets/_Project/Scripts/Drag%20and%20drop/CellView.cs) проксирует события мыши и клавиатуры в [DragDropOrchestrator](Assets/_Project/Scripts/Drag%20and%20drop/_Drag%20Drop%20Orchestrator.cs), который обрабатывает перенос стаков, разделение и взаимодействия с контекстным меню.

| Ввод | Результат |
| --- | --- |
| Левый клик | Забирает стак из ячейки или помещает переносимый стак, если целевая ячейка его принимает. |
| Правый клик | Перекладывает один предмет из переносимого стека в ячейку. |
| Shift + правый клик | Делит стак в ячейке пополам и поднимает новую половину. |
| Правый клик (нет перетаскиваемого стека) | Открывает контекстное меню с действиями **«Использовать»** и **«Удалить»**, если они разрешены. |

Подсказка отображается через секунду после наведения курсора и обновляется, пока указатель остаётся над ячейкой.

## Добавление новых предметов
Новые предметы создаются в инспекторе Unity в секции `----CONTROLLERS----` → **Item Creator**. Инструмент формирует стак из пары **ItemData + количество элементов**. [ItemData](Assets/_Project/Scriptable%20Obj/ItemData.cs) реализован как `ScriptableObject`, который задаёт иконку, тип предмета, максимальный размер стека и другие параметры поведения. После генерации стека настройте свойства, чтобы предмет корректно участвовал в логике инвентаря и отображении.
